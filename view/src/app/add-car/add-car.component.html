
<div class="container-fluid" style="padding: 2% 8%">
  <div class="container text-center w-100 mb-4" style="font-family: 'Luckiest Guy', cursive;">
    <h1>Add Car</h1>
  </div>
  <div class="container-md mt-5 mb-5 text-bg-dark rounded-5 p-5">
    <form class="row g-3" [formGroup]="car" (ngSubmit)="onSubmit()">
      <div class="p-3 text-center img-top" style=" display: block;">
        <img style="max-width: 100%; " [src]="pathImage">
      </div>
      <div class="col-12">
        <input class="form-control" type="file" id="image" multiple=""
               [ngClass]="{'is-valid':file?.valid,'is-invalid':file?.invalid&&file?.dirty}" formControlName="file"
               (change)="uploadFile($event)" placeholder="Image">
      </div>

      <hr class="mb-0">

      <div class="d-flex justify-content-between w-100">
        <div class="col-5">
          <div class="mb-3 row">
            <label for="brand" class="col-sm-3 form-label fs-4 fw-semibold">Brand</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" id="brand"
                     [ngClass]="{'is-valid':brand?.valid,'is-invalid':brand?.invalid&&brand?.dirty}"
                     formControlName="brand"
                     placeholder="Brand">
              <div class="invalid-feedback">
                <span>Brand should be: </span>
                <span *ngIf="brand?.errors?.['required']">fill</span>
                <span *ngIf="brand?.errors?.['minlength']">min length 2</span>
              </div>
            </div>

          </div>
        </div>
        <div class="col-5">
          <div class="mb-3 row">
            <label for="model" class="col-sm-3 form-label fs-4 fw-semibold">Model</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" id="model"
                     [ngClass]="{'is-valid':model?.valid,'is-invalid':model?.invalid&&model?.dirty}"
                     formControlName="model"
                     placeholder="Model">
              <div class="valid-feedback">
                Looks good!
              </div>
              <div class="invalid-feedback">
                Looks bad!
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr class="m-0">

      <div class="col-12">
        <div class="row col-6">
          <label for="bodyType" class="col-sm-3 form-label fs-4 fw-semibold"><p>Body type</p></label>
          <div class="col-sm-5">
            <select class="form-select" [ngClass]="{'is-valid':bodyType?.valid,'is-invalid':bodyType?.invalid&&bodyType?.dirty}"
                    formControlName="bodyType" id="bodyType">
              <option selected value="">Select body type</option>
              <option *ngFor="let bodyType of bodyTypes | keyvalue" value="{{bodyType.key}}">{{bodyType.value}}</option>
            </select>
          </div>
        </div>
      </div>
      <hr class="m-0 w-50">
      <div class="col-12">
        <div class="row col-6">
          <label for="transmissionType" class="col-sm-5 form-label fs-4 fw-semibold"><p>Transmission type</p></label>
          <div class="col-sm-6">
            <select class="form-select" aria-label=".form-select example"
                    [ngClass]="{'is-valid':transmissionType?.valid,'is-invalid':transmissionType?.invalid&&transmissionType?.dirty}"
                    formControlName="transmissionType" id="transmissionType">
              <option selected value="">Select transmission type</option>
              <option *ngFor="let transmissionType of transmissionTypes | keyvalue"
                      [value]="transmissionType.key">{{transmissionType.value}}</option>
            </select>
          </div>
        </div>
      </div>
      <hr class="m-0 w-50">

      <div class="col-12">
        <div class="row col-6">
          <label for="engine" class="col-sm-4 form-label fs-4 fw-semibold"><p>Engine size</p></label>
          <div class="col-4">
            <input type="number" step="0.1" class="form-control" id="engine"
                   [ngClass]="{'is-valid':engineSize?.valid,'is-invalid':engineSize?.invalid&&engineSize?.dirty}"
                   placeholder="Engine size" formControlName="engineSize">
          </div>
        </div>
      </div>

      <hr class="m-0 w-50">

      <div class="col-12">
        <div class="row col-6">
          <label for="engine" class="col-sm-2 form-label fs-4 fw-semibold"><p>Year</p></label>
          <div class="col-4">
            <input type="number" class="form-control" id="year" [class.is-valid]="year?.valid" [class.is-invalid]="year?.invalid&&year?.dirty" formControlName="year"
                   placeholder="Year">
          </div>
        </div>
      </div>

      <hr class="m-0 w-50">

      <div class="col-12">
        <label for="shortDescription" class="form-label fs-4 fw-semibold">Short description:</label>
        <textarea class="form-control" id="shortDescription" rows="3"
                  [class.is-valid]="shortDescription?.valid" [class.is-invalid]="shortDescription?.invalid&&shortDescription?.dirty"
                  formControlName="shortDescription"></textarea>
      </div>

      <hr class="mb-0">

      <div class="col-12">
        <label for="description" class="form-label fs-4 fw-semibold">Description:</label>
        <textarea class="form-control" id="description" rows="3"
                  [class.is-valid]="description?.valid" [class.is-invalid]="description?.invalid&&description?.dirty"
                  formControlName="description"></textarea>
      </div>

      <hr class="mb-0">

      <div formArrayName="optionalList">
        <h4>Optional list:</h4>

        <div *ngFor="let option of optionalList.controls; let i=index">
          <!-- The repeated alias template -->
          <div class="d-flex justify-content-between mb-3">
            <input class="form-control d-inline col-8" id="option-{{ i }}" type="text"
                   [class.is-valid]="optionalList.at(i)?.valid" [class.is-invalid]="optionalList.at(i)?.invalid&&optionalList.at(i)?.dirty"
                   [formControlName]="i" placeholder="Option">
            <button type="button" class="btn btn-danger col-2 d-inline" (click)="removeOption(i)">Drop option</button>
          </div>
        </div>

        <button type="button" class="btn btn-success" (click)="addOption()">Add option</button>
      </div>

      <hr class="mb-0">

      <div class="d-flex justify-content-between w-100">
        <button type="submit" class="btn btn-success col-5" [disabled]="!car.valid">Add car</button>
        <button type="reset" class="btn btn-danger col-5">Reset</button>
      </div>
    </form>
  </div>
</div>
